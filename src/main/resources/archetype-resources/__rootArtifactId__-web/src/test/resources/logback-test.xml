<?xml version="1.0" encoding="UTF-8"?>
#if($showComment)
<!--
<configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="classpath:logback.xsd">
-->
#end
<!-- 检测更新、自动重载配置，打印jar版本 -->
<configuration scan="true" scanPeriod="60 seconds" debug="true" packagingData="true">

    <!-- 配置文件路径变量 -->
    <property name="logDir" value="G:\\tmp" />
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- 开启着色功能，Windows系统另外需要Jansi库 -->
        <withJansi>true</withJansi>
        <!-- 默认encoder，可省略class -->
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <!-- 最多显示类名(x.y.z)n个字符，并左靠齐 -->
            <pattern>%d{HH:mm:ss.SSS} [%thread] %highlight(%-5level) [%X{req.remoteHost} %X{req.requestURI}] %cyan(%logger{20}) - %m%n</pattern>
        </encoder>
    </appender>
    <root level="TRACE">
        <appender-ref ref="STDOUT"/>
    </root>
    <logger name="org.springframework" level="ERROR" additivity="false">
        <appender-ref ref="STDOUT" />
    </logger>
    <logger name="org.apache" level="ERROR" additivity="false">
        <appender-ref ref="STDOUT" />
    </logger>

    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${logDir}/myApp.%d{yyyy-MM-dd}.log</fileNamePattern>
        </rollingPolicy>
        <encoder>
            <pattern>%date{HH:mm:ss SSS } [%thread] %-5level %C{15} %M %L - %msg%n</pattern>
        </encoder>
    </appender>
    <logger name="free.care" additivity="false">
        <appender-ref ref="STDOUT"></appender-ref>
    </logger>

    <appender name="SMTP" class="ch.qos.logback.classic.net.SMTPAppender">
        <smtpHost>smtp.126.com</smtpHost>
        <smtpPort>25</smtpPort>
        <SSL>true</SSL>
        <username>IM_Tester@126.com</username>
        <password>trustno1</password>
        <to>管理员</to>
        <to>lmiang@163.com</to>
        <from>IM_Tester@126.com</from>
        <subject>%logger{20} - %m</subject>
        <layout class="ch.qos.logback.classic.html.HTMLLayout">
            <pattern>%date [%thread] %-5level %logger - %msg%n"></pattern>
        </layout>
    </appender>
    <logger level="INFO" name="free.i" additivity="false">
        <appender-ref ref="SMTP" />
    </logger>

    <!-- 设置时间戳格式 -->
    <timestamp key="bySecond" datePattern="yyyyMMdd'T'HHmmss"/>

    <!-- 需要创建logging_event, logging_event_exception, logging_event_property三张表
    <appender name="DB" class="ch.qos.logback.classic.db.DBAppender">-->
    <!--
    <connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource">
      <dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource" />
      <driverClass>org.mariadb.jdbc.Driver</driverClass>
        <url>jdbc:mysql://localhost:3306/demo</url>
        <user>app_log</user>
        <password>r0b0t</password>
  </connectionSource>

  <connectionSource class="ch.qos.logback.core.db.JNDIConnectionSource">
    <jndiLocation>java:comp/env/jdbc/mdb_pool</jndiLocation>
  </connectionSource>
</appender>
<root level="TRACE">
  <appender-ref ref="DB"/>
</root>-->

</configuration>
